<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Cloud Provider - Powerfulseal</title> <meta name="Description" content=""> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Cloud Provider | Powerfulseal</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Cloud Provider" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A powerful testing tool for Kubernetes clusters." /> <meta property="og:description" content="A powerful testing tool for Kubernetes clusters." /> <link rel="canonical" href="http://localhost:4000/cloud-provider-requirements" /> <meta property="og:url" content="http://localhost:4000/cloud-provider-requirements" /> <meta property="og:site_name" content="Powerfulseal" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"Cloud Provider","description":"A powerful testing tool for Kubernetes clusters.","url":"http://localhost:4000/cloud-provider-requirements","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight"> Powerfulseal </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link">Welcome</a></li><li class="navigation-list-item"><a href="http://localhost:4000/getting-started" class="navigation-list-link">Getting Started</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/setup" class="navigation-list-link">Setup</a><ul class="navigation-list-child-list "><li class="navigation-list-item active"><a href="http://localhost:4000/cloud-provider-requirements" class="navigation-list-link active">Cloud Provider</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/modes" class="navigation-list-link">Modes</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/autonomous-mode" class="navigation-list-link">Autonomous</a></li><li class="navigation-list-item "><a href="http://localhost:4000/interactive-mode" class="navigation-list-link">Interactive</a></li><li class="navigation-list-item "><a href="http://localhost:4000/label-mode" class="navigation-list-link">Label</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/contribute" class="navigation-list-link">Contribute</a></li><li class="navigation-list-item"><a href="http://localhost:4000/in-depth-topics" class="navigation-list-link">In-depth topics</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Powerfulseal" aria-label="Search Powerfulseal" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="//github.com/bloomberg/powerfulseal">Powerfulseal on GitHub</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/setup">Setup</a></li> <li class="breadcrumb-nav-list-item"><span>Cloud Provider</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h2 class="no_toc" id="cloud-provider-requirements"> <a href="#cloud-provider-requirements" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Cloud Provider Requirements </h2> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#ssh" id="markdown-toc-ssh">SSH</a></li> <li><a href="#azure" id="markdown-toc-azure">Azure</a></li> <li><a href="#aws" id="markdown-toc-aws">AWS</a></li> <li><a href="#openstack" id="markdown-toc-openstack">OpenStack</a></li> <li><a href="#gcp" id="markdown-toc-gcp">GCP</a></li> </ol> <hr /> <h2 id="ssh"> <a href="#ssh" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> SSH </h2> <p>In all cases, the SSH Keys must be set up for SSH Client access of the nodes.</p> <blockquote> <p>Note: With GCP, running <code class="language-plaintext highlighter-rouge">gcloud compute config-ssh</code> makes SSHing to node instances easier by adding an alias for each instance to the user SSH configuration (~/.ssh/config) file and then being able to use the generated file with <code class="language-plaintext highlighter-rouge">--ssh-path-to-private-key</code> argument.</p> </blockquote> <h2 id="azure"> <a href="#azure" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Azure </h2> <p>The credentials to connect to Azure may be specified in one of two ways:</p> <ol> <li>Supply the full path to an Azure credentials file in the environment variable <code class="language-plaintext highlighter-rouge">AZURE_AUTH_LOCATION</code>.<br /> This is the easiest method. The credentials file can be generated via <code class="language-plaintext highlighter-rouge">az aks get-credentials -n &lt;cluster name&gt; -g &lt;resource group&gt; -a -f &lt;destination credentials file&gt;</code></li> <li>Supply the individual credentials in the environment variables: <code class="language-plaintext highlighter-rouge">AZURE_SUBSCRIPTION_ID</code>, <code class="language-plaintext highlighter-rouge">AZURE_CLIENT_ID</code>, <code class="language-plaintext highlighter-rouge">AZURE_CLIENT_SECRET</code>, <code class="language-plaintext highlighter-rouge">AZURE_TENANT_ID</code></li> </ol> <h2 id="aws"> <a href="#aws" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> AWS </h2> <p>The credentials to connect to AWS are specified the same as for the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html">AWS CLI</a></p> <h2 id="openstack"> <a href="#openstack" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> OpenStack </h2> <p>The easiest way to use PowerfulSeal, is to download and source the OpenRC file you can get from Horizon. It should ask you for your password, and it should set all the <code class="language-plaintext highlighter-rouge">OS_*</code> variables for you. Alternatively, you can set them yourself.</p> <p>Both approaches are detailed in <a href="https://docs.openstack.org/mitaka/user-guide/common/cli_set_environment_variables_using_openstack_rc.html">the official documentation</a>.</p> <h2 id="gcp"> <a href="#gcp" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> GCP </h2> <blockquote> <p>Google Cloud SDK and kubectl are required</p> </blockquote> <p>The GCP cloud driver supports managed (GKE) and custom Kubernetes clusters running on top of Google Cloud Compute.</p> <p>For setting up <code class="language-plaintext highlighter-rouge">PowerfulSeal</code>, the first step is configuring gcloud SDK (as <code class="language-plaintext highlighter-rouge">PowerfulSeal</code> will work with your configured <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">project</a> and <a href="https://cloud.google.com/compute/docs/regions-zones/changing-default-zone-region">region</a>) and pointing kubectl to your cluster. Both can be configured easily following <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl">this</a> tutorial (For GKE!). In case you don’t want to use the default project/region of gcloud SDK, you can point <code class="language-plaintext highlighter-rouge">PowerfulSeal</code> to the correct one (in json) with <code class="language-plaintext highlighter-rouge">--gcp-config-file</code> argument.</p> <p>For being able to run node related commands, credentials have to be specified in one of these <a href="https://cloud.google.com/docs/authentication/">ways</a>:</p> <ol> <li>Service account (Recommended): a Google account that is associated with your GCP project, as opposed to a specific user. <code class="language-plaintext highlighter-rouge">PowerfulSeal</code> uses the environment variable and is pretty straightforward to set up using <a href="https://cloud.google.com/docs/authentication/getting-started">this</a> tutorial.</li> <li>User account: Not recommended as you can reach easily reach a “quota exceeded” or “API not enabled” error. <code class="language-plaintext highlighter-rouge">PowerfulSeal</code> uses auto-discovery and to get it working just follow <a href="https://cloud.google.com/docs/authentication/end-user">this</a>.</li> </ol> <p>Having configuration ready and ssh connection to the node instances working, you can start playing with <code class="language-plaintext highlighter-rouge">PowerfulSeal</code> with this example: <code class="language-plaintext highlighter-rouge">powerfulseal interactive --kubeconfig ~/.kube/config --gcp --inventory-kubernetes --ssh-allow-missing-host-keys --ssh-path-to-private-key ~/.ssh/google_compute_engine --remote-user myuser</code></p> <blockquote> <p>Note: In case of running inside Pyenv and getting <code class="language-plaintext highlighter-rouge">python2 command not found</code> error when running gcloud (and you want to run <code class="language-plaintext highlighter-rouge">PowerfulSeal</code> with Python 3+), <a href="https://github.com/pyenv/pyenv/issues/1159#issuecomment-453906182">this</a> might be useful, as gcloud requires Python2.</p> </blockquote> </div> </div> </div> </div> </body> </html>
